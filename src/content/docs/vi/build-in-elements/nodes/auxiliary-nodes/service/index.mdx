---
title: Tổng quan Services
description: Tổng quan về Service Nodes, thực hiện các tác vụ nền theo thời gian.
---
import { Tabs, TabItem, Aside } from '@astrojs/starlight/components';

## Tổng quan

**Service Nodes** là một loại đặc biệt của Auxiliary Node **không** phải là một phần của luồng thực thi chính. Thay vào đó, chúng được gắn vào một Composite Node và chạy theo khoảng thời gian đều đặn miễn là parent composite của chúng đang hoạt động trong behavior tree.

Services hoàn hảo cho các tác vụ cần xảy ra định kỳ trong nền, mà không làm gián đoạn logic chính của tree.

<Aside type="note">
**Khác biệt chính:** Không giống như Decorator, Service không bọc một child và không ảnh hưởng đến trạng thái `Success` hoặc `Failure` của nhánh mà nó đang ở trên. Nó chạy song song với children của composite.
</Aside>

Các用途 phổ biến cho services bao gồm:
- Tìm kiếm player hoặc target định kỳ.
- Cập nhật giá trị Blackboard (ví dụ: khoảng cách đến target).
- Kiểm tra health hoặc các stats khác của AI.

<Tabs>
<TabItem label="C# Base Class">
```csharp
// --- START OF FILE ServiceNode.cs ---
using UnityEngine;

namespace ND_BehaviorTree
{   
    public abstract class ServiceNode : AuxiliaryNode
    {
        public float interval = 1.0f;
        public bool runOnEnter = true;

        [System.NonSerialized]
        private float lastExecutionTime;

        protected override void OnEnter()
        {
            lastExecutionTime = -interval;
            if (runOnEnter)
            {
                lastExecutionTime = Time.time;
                OnTick();
            }
        }

        protected override Status OnProcess()
        {
            if (Time.time - lastExecutionTime > interval)
            {
                lastExecutionTime = Time.time;
                OnTick();
            }
            return Status.Success;
        }

        protected override void OnExit() { }

        protected abstract void OnTick();
    }
}
```
</TabItem>
</Tabs>
